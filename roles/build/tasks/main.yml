---
- name: Create the host_vars directory
  file: path={{ playbook_dir }}/host_vars/ state=directory

- include: server_build_helper.yml
  when: servers is defined

- name: Create hosts file
  template: src=hosts.j2 dest="{{ playbook_dir }}/hosts" backup=no

- name: Create the group_vars directory
  file: path={{ playbook_dir }}/group_vars/ state=directory

- name: Create group_vars/all file
  template: src=group_vars.all.j2 dest="{{ playbook_dir }}/group_vars/all" backup=no

- name: Create YML files
  template: src={{ item }}.j2 dest="{{ playbook_dir }}/{{ item }}" backup=no
  with_items: 
    - util-deploy.yml
    - nserver-deploy.yml
    - stat-deploy.yml
    - vsd-deploy.yml
    - nuage-install.yml
    - bridges.yml
    - reset-all-domains.yml
    - packet-create.yml
    - packet-reset.yml
